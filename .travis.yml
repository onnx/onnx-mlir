sudo: required
services:
  - docker
language: cpp
dist: bionic
script:
  - cd docker
  - chmod a+x compile-onnx-mlir.sh
  - docker build --tag onnx-mlir-build:initial .
  - docker run -itd -v $(pwd):/onnx-mlir --name build onnx-mlir-build:initial
  - docker cp compile-onnx-mlir.sh build:/usr/bin/compile-onnx-mlir.sh
  - docker exec -itd build compile-onnx-mlir.sh
  - docker exec -itd -w /onnx-mlir/build -e LIT_OPT=v build cmake --build . --target check-onnx-lit
  
