sudo: required
services:
  - docker
language: cpp
dist: bionic
script:
  - cd docker
  - chmod a+x compile-onnx-mlir.sh
  - docker build --tag onnx-mlir-build:initial .
  - docker run -itd -v $(pwd):/onnx-mlir --name build onnx-mlir-build:initial
  - docker exec build mkdir /build/bin
  - docker copy build compile-onnx-mlir.sh /usr/bin/compile-onnx-mlir.sh
  - docker exec build compile-onnx-mlir.sh
  - docker exec build export LIT_OPT=v
  - docker exec build cd /onnx-mlir/build
  - docker exec build cmake --build . --target check-onnx-lit
  
